base file shared from the Luis original code